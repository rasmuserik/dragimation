// Generated by CoffeeScript 1.6.1
(function() {

  window.dragimation = function($elems, ypos) {
    var $dragged, initialiseMovement, move, x0, xscale, y0, yscale;
    $elems.on("mousedown", function() {
      initialiseMovement(this);
      $("body").on("mousemove", move);
      $("body").on("mouseup mouseleave", function() {
        $("body").off("mousemove", move);
        $dragged.css("transform", "matrix(1,0,0,1,0,0)");
        $dragged.css("-webkit-transform", "matrix(1,0,0,1,0,0)");
        $dragged.css("-ms-transform", "matrix(1,0,0,1,0,0)");
        $dragged.css("-moz-transform", "matrix(1,0,0,1,0,0)");
        return false;
      });
      return false;
    });
    x0 = void 0;
    y0 = void 0;
    $dragged = void 0;
    xscale = void 0;
    yscale = void 0;
    initialiseMovement = function(dragged) {
      var pos;
      $dragged = $(dragged);
      pos = $dragged.offset();
      x0 = pos.left;
      y0 = pos.top;
      xscale = $dragged.outerWidth();
      return yscale = $dragged.outerHeight() * ypos;
    };
    return move = function(e) {
      var transform, transformStr, x, y;
      x = (e.pageX - x0) / xscale;
      y = (e.pageY - y0) / yscale;
      transform = [1, 0, xscale / yscale * (x - 0.5), y, 0, 0];
      transformStr = "matrix(" + transform + ")";
      return $dragged.css({
        "transform-origin": "top",
        "-webkit-transform-origin": "top",
        "-ms-transform-origin": "top",
        "-moz-transform-origin": "top",
        "transform": transformStr,
        "-webkit-transform": transformStr,
        "-ms-transform": transformStr,
        "-moz-transform": transformStr
      });
    };
  };

}).call(this);
